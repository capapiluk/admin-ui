"use strict";const e=require("vue"),ye={class:"bh-filter-menu bh-absolute bh-z-[1] bh-bg-white bh-shadow-md bh-rounded-md bh-top-full bh-right-0 bh-w-32 bh-mt-1"},_e=["onClick"],we=e.defineComponent({__name:"column-filter",props:["column"],emits:["close","filterChange"],setup(p,{emit:f}){const s=p;e.onBeforeUnmount(()=>{document.removeEventListener("click",n)}),e.onMounted(()=>{document.addEventListener("click",n)});const n=()=>{f("close")},h=b=>{s.column.condition=b,b===""&&(s.column.value=""),f("filterChange",s.column)};return(b,a)=>(e.openBlock(),e.createElementBlock("div",ye,[e.createElementVNode("div",{class:"bh-text-[13px] bh-font-normal bh-rounded bh-overflow-hidden",onClick:e.withModifiers(n,["stop"])},[e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition===""}),onClick:a[0]||(a[0]=r=>h(""))},"No filter",2),s.column.type==="string"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="contain"}),onClick:a[1]||(a[1]=r=>h("contain"))},"Contain",2),e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="not_contain"}),onClick:a[2]||(a[2]=r=>h("not_contain"))},"Not contain",2),e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="equal"}),onClick:a[3]||(a[3]=r=>h("equal"))},"Equal",2),e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="not_equal"}),onClick:a[4]||(a[4]=r=>h("not_equal"))},"Not equal",2),e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="start_with"}),onClick:a[5]||(a[5]=r=>h("start_with"))},"Starts with",2),e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="end_with"}),onClick:a[6]||(a[6]=r=>h("end_with"))},"Ends with",2)],64)):s.column.type==="number"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="equal"}),onClick:a[7]||(a[7]=r=>h("equal"))},"Equal",2),e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="not_equal"}),onClick:a[8]||(a[8]=r=>h("not_equal"))},"Not Equal",2),e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="greater_than"}),onClick:a[9]||(a[9]=r=>h("greater_than"))},"Greater than",2),e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="greater_than_equal"}),onClick:a[10]||(a[10]=r=>h("greater_than_equal"))},"Greater than or equal",2),e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="less_than"}),onClick:a[11]||(a[11]=r=>h("less_than"))},"Less than",2),e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="less_than_equal"}),onClick:a[12]||(a[12]=r=>h("less_than_equal"))},"Less than or equal",2)],64)):s.column.type==="date"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="equal"}),onClick:a[13]||(a[13]=r=>h("equal"))},"Equal",2),e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="not_equal"}),onClick:a[14]||(a[14]=r=>h("not_equal"))},"Not equal",2),e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="greater_than"}),onClick:a[15]||(a[15]=r=>h("greater_than"))},"Greater than",2),e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="less_than"}),onClick:a[16]||(a[16]=r=>h("less_than"))},"Less than",2)],64)):e.createCommentVNode("",!0),e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="is_null"}),onClick:a[17]||(a[17]=r=>h("is_null"))},"Is null",2),e.createElementVNode("button",{type:"button",class:e.normalizeClass({active:s.column.condition==="is_not_null"}),onClick:a[18]||(a[18]=r=>h("is_not_null"))},"Not null",2)],8,_e)]))}}),D=(p,f)=>{const s=p.__vccOpts||p;for(const[n,h]of f)s[n]=h;return s},Be={},Ee={version:"1.1",viewBox:"0 0 17 12",xmlns:"http://www.w3.org/2000/svg"},Ne=e.createElementVNode("g",{fill:"none","fill-rule":"evenodd"},[e.createElementVNode("g",{transform:"translate(-9 -11)",fill:"currentColor","fill-rule":"nonzero"},[e.createElementVNode("path",{d:"m25.576 11.414c0.56558 0.55188 0.56558 1.4439 0 1.9961l-9.404 9.176c-0.28213 0.27529-0.65247 0.41385-1.0228 0.41385-0.37034 0-0.74068-0.13855-1.0228-0.41385l-4.7019-4.588c-0.56584-0.55188-0.56584-1.4442 0-1.9961 0.56558-0.55214 1.4798-0.55214 2.0456 0l3.679 3.5899 8.3812-8.1779c0.56558-0.55214 1.4798-0.55214 2.0456 0z"})])],-1),Ve=[Ne];function Se(p,f){return e.openBlock(),e.createElementBlock("svg",Ee,Ve)}const j=D(Be,[["render",Se]]),ze={},xe={viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor","stroke-width":"3",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"css-i6dzq1"},$e=e.createElementVNode("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1),Fe=[$e];function Me(p,f){return e.openBlock(),e.createElementBlock("svg",xe,Fe)}const Le=D(ze,[["render",Me]]),qe={},De={viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor","stroke-width":"1.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"css-i6dzq1"},Ae=e.createElementVNode("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},null,-1),Re=[Ae];function Te(p,f){return e.openBlock(),e.createElementBlock("svg",De,Re)}const He=D(qe,[["render",Te]]),Oe={key:"hdrrow"},Pe={class:"bh-checkbox"},Ue=["onClick"],Ie={width:"16",height:"16",viewBox:"0 0 14 14",fill:"none"},Ge={key:0,class:"bh-filter bh-relative"},Ke=["onUpdate:modelValue"],Je=["onUpdate:modelValue"],We=["onUpdate:modelValue"],Ye=["onUpdate:modelValue"],Qe=e.createElementVNode("option",{value:void 0},"All",-1),Xe=e.createElementVNode("option",{value:!0},"True",-1),Ze=e.createElementVNode("option",{value:!1},"False",-1),je=[Qe,Xe,Ze],et=["onClick"],Z=e.defineComponent({__name:"column-header",props:["all","currentSortColumn","currentSortDirection","isOpenFilter","isFooter","checkAll"],emits:["selectAll","sortChange","filterChange","toggleFilterMenu"],setup(p,{emit:f}){const s=p,n=e.ref(null),h=()=>{n.value&&(n.value.indeterminate=s.checkAll!==0?!s.checkAll:!1,n.value.checked=s.checkAll)};return e.watch(()=>s.checkAll,h),(b,a)=>(e.openBlock(),e.createElementBlock("tr",Oe,[s.all.hasCheckbox?(e.openBlock(),e.createElementBlock("th",{key:"chkall",class:e.normalizeClass(["bh-w-px",{"bh-sticky bh-bg-blue-light bh-z-[1]":s.all.stickyHeader||s.all.stickyFirstColumn,"bh-top-0":s.all.stickyHeader,"bh-left-0":s.all.stickyFirstColumn}])},[e.createElementVNode("div",Pe,[e.createElementVNode("input",{ref_key:"selectedAll",ref:n,type:"checkbox",onClick:a[0]||(a[0]=e.withModifiers(r=>f("selectAll",r.target.checked),["stop"]))},null,512),e.createElementVNode("div",null,[e.createVNode(j,{class:"check"}),e.createVNode(Le,{class:"intermediate"})])])],2)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.all.columns,(r,M)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[r.hide?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("th",{key:r.field,class:e.normalizeClass(["bh-select-none bh-z-[1]",[s.all.sortable&&r.sort?"bh-cursor-pointer":"",M===0&&s.all.stickyFirstColumn?"bh-sticky bh-left-0 bh-bg-blue-light":"",s.all.hasCheckbox&&M===0&&s.all.stickyFirstColumn?"bh-left-[52px]":""]]),style:e.normalizeStyle({width:r.width,"min-width":r.minWidth,"max-width":r.maxWidth})},[e.createElementVNode("div",{class:e.normalizeClass(["bh-flex bh-items-center",[r.headerClass?r.headerClass:""]]),onClick:m=>s.all.sortable&&r.sort&&f("sortChange",r.field)},[e.createTextVNode(e.toDisplayString(r.title)+" ",1),s.all.sortable&&r.sort?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(["bh-ml-3 bh-sort bh-flex bh-items-center",[s.currentSortColumn,s.currentSortDirection]])},[(e.openBlock(),e.createElementBlock("svg",Ie,[e.createElementVNode("polygon",{points:"3.11,6.25 10.89,6.25 7,1.75 ",fill:"currentColor",class:e.normalizeClass(["bh-text-black/20",[p.currentSortColumn===r.field&&p.currentSortDirection==="asc"?"!bh-text-primary":""]])},null,2),e.createElementVNode("polygon",{points:"7,12.25 10.89,7.75 3.11,7.75 ",fill:"currentColor",class:e.normalizeClass(["bh-text-black/20",[p.currentSortColumn===r.field&&p.currentSortDirection==="desc"?"!bh-text-primary":""]])},null,2)]))],2)):e.createCommentVNode("",!0)],10,Ue),s.all.columnFilter&&!s.isFooter?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[r.filter?(e.openBlock(),e.createElementBlock("div",Ge,[r.type==="string"?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,"onUpdate:modelValue":m=>r.value=m,type:"text",class:"bh-form-control",onKeyup:a[1]||(a[1]=m=>f("filterChange"))},null,40,Ke)),[[e.vModelText,r.value,void 0,{trim:!0}]]):e.createCommentVNode("",!0),r.type==="number"?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:1,"onUpdate:modelValue":m=>r.value=m,type:"number",class:"bh-form-control",onKeyup:a[2]||(a[2]=m=>f("filterChange"))},null,40,Je)),[[e.vModelText,r.value,void 0,{number:!0,trim:!0}]]):r.type==="date"?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:2,"onUpdate:modelValue":m=>r.value=m,type:"date",class:"bh-form-control",onChange:a[3]||(a[3]=m=>f("filterChange"))},null,40,We)),[[e.vModelText,r.value]]):r.type==="bool"?e.withDirectives((e.openBlock(),e.createElementBlock("select",{key:3,"onUpdate:modelValue":m=>r.value=m,class:"bh-form-control",onChange:a[4]||(a[4]=m=>f("filterChange")),onClick:a[5]||(a[5]=m=>s.isOpenFilter=null)},je,40,Ye)),[[e.vModelSelect,r.value]]):e.createCommentVNode("",!0),r.type!=="bool"?(e.openBlock(),e.createElementBlock("button",{key:4,type:"button",onClick:e.withModifiers(m=>f("toggleFilterMenu",r),["stop"])},[e.createVNode(He,{class:"bh-w-4"})],8,et)):e.createCommentVNode("",!0),e.withDirectives(e.createVNode(we,{column:r,type:r.type,onClose:a[6]||(a[6]=m=>f("toggleFilterMenu",null)),onFilterChange:a[7]||(a[7]=m=>f("filterChange"))},null,8,["column","type"]),[[e.vShow,s.isOpenFilter===r.field]])])):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0)],6))],64))),256))]))}}),tt={},lt={width:"84",height:"84",viewBox:"0 0 24 24",class:"bh-loader bh-text-primary"},nt=e.createStaticVNode('<circle cx="18" cy="12" r="0" fill="currentColor"><animate attributeName="r" begin=".67" calcMode="spline" dur="1.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="12" r="0" fill="currentColor"><animate attributeName="r" begin=".33" calcMode="spline" dur="1.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="6" cy="12" r="0" fill="currentColor"><animate attributeName="r" begin="0" calcMode="spline" dur="1.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle>',3),ot=[nt];function at(p,f){return e.openBlock(),e.createElementBlock("svg",lt,ot)}const rt=D(tt,[["render",at]]),st={class:"bh-datatable bh-antialiased bh-relative bh-text-black bh-text-sm bh-font-normal"},it=["onClick"],ct={class:"bh-checkbox"},ut=["value"],dt=["innerHTML"],ht={key:1},mt=["colspan"],vt=["colspan"],ft=e.createElementVNode("div",{class:"bh-skeleton-box bh-h-8"},null,-1),pt=[ft],kt={key:0,class:"bh-absolute bh-inset-0 bh-bg-blue-light/50 bh-grid bh-place-content-center"},Ct={class:"bh-flex bh-items-center bh-flex-wrap bh-flex-col sm:bh-flex-row bh-gap-4"},bt={class:"bh-pagination-info bh-flex bh-items-center"},gt={class:"bh-mr-2"},yt=["value"],_t={class:"bh-pagination-number sm:bh-ml-auto bh-inline-flex bh-items-center bh-space-x-1"},wt=["innerHTML"],Bt={key:1,"aria-hidden":"true",width:"14",height:"14",viewBox:"0 0 16 16"},Et=e.createElementVNode("g",{fill:"currentColor","fill-rule":"evenodd"},[e.createElementVNode("path",{d:"M8.354 1.646a.5.5 0 0 1 0 .708L2.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"}),e.createElementVNode("path",{d:"M12.354 1.646a.5.5 0 0 1 0 .708L6.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"})],-1),Nt=[Et],Vt=["innerHTML"],St={key:1,"aria-hidden":"true",width:"14",height:"14",viewBox:"0 0 16 16"},zt=e.createElementVNode("path",{fill:"currentColor","fill-rule":"evenodd",d:"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"},null,-1),xt=[zt],$t=["onClick"],Ft=["innerHTML"],Mt={key:1,"aria-hidden":"true",width:"14",height:"14",viewBox:"0 0 16 16"},Lt=e.createElementVNode("path",{fill:"currentColor","fill-rule":"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8L4.646 2.354a.5.5 0 0 1 0-.708z"},null,-1),qt=[Lt],Dt=["innerHTML"],At={key:1,"aria-hidden":"true",width:"14",height:"14",viewBox:"0 0 16 16"},Rt=e.createElementVNode("g",{fill:"currentColor","fill-rule":"evenodd"},[e.createElementVNode("path",{d:"M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8L3.646 2.354a.5.5 0 0 1 0-.708z"}),e.createElementVNode("path",{d:"M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8L7.646 2.354a.5.5 0 0 1 0-.708z"})],-1),Tt=[Rt],Ht=e.defineComponent({__name:"custom-table",props:{loading:{type:Boolean,default:!1},isServerMode:{type:Boolean,default:!1},skin:{default:"bh-table-striped bh-table-hover"},totalRows:{default:0},rows:{default:()=>[]},columns:{default:()=>[]},hasCheckbox:{type:Boolean,default:!1},search:{default:""},columnChooser:{type:Boolean,default:!1},page:{default:1},pageSize:{default:10},pageSizeOptions:{default:()=>[10,20,30,50,100]},showPageSize:{type:Boolean,default:!0},rowClass:{default:[]},cellClass:{default:[]},sortable:{type:Boolean,default:!1},sortColumn:{default:"id"},sortDirection:{default:"asc"},columnFilter:{type:Boolean,default:!1},pagination:{type:Boolean,default:!0},showNumbers:{type:Boolean,default:!0},showNumbersCount:{default:5},showFirstPage:{type:Boolean,default:!0},showLastPage:{type:Boolean,default:!0},firstArrow:{default:""},lastArrow:{default:""},nextArrow:{default:""},previousArrow:{default:""},paginationInfo:{default:"Showing {0} to {1} of {2} entries"},noDataContent:{default:"No data available"},stickyHeader:{type:Boolean,default:!1},height:{default:"500px"},stickyFirstColumn:{type:Boolean,default:!1},cloneHeaderInFooter:{type:Boolean,default:!1},selectRowOnClick:{type:Boolean,default:!1}},emits:["change","sortChange","searchChange","pageChange","pageSizeChange","rowSelect","filterChange","rowClick","rowDBClick"],setup(p,{expose:f,emit:s}){var W;const n=p,h=e.useSlots();for(const l of n.columns||[]){const t=((W=l.type)==null?void 0:W.toLowerCase())||"string";l.type=t,l.isUnique=l.isUnique!==void 0?l.isUnique:!1,l.hide=l.hide!==void 0?l.hide:!1,l.filter=l.filter!==void 0?l.filter:!0,l.search=l.search!==void 0?l.search:!0,l.sort=l.sort!==void 0?l.sort:!0,l.html=l.html!==void 0?l.html:!1,l.condition=!t||t==="string"?"contain":"equal"}const b=e.ref([]),a=e.ref(n.page),r=e.ref(n.pagination?n.pageSize:n.rows.length),M=n.pageSize,m=e.ref(n.sortColumn),ee=n.sortColumn,E=e.ref(n.sortDirection),te=n.sortDirection,y=e.ref(n.totalRows),g=e.ref([]),A=e.ref(null),V=e.ref(n.loading),S=e.ref(n.search),le=JSON.parse(JSON.stringify(n.columns)),z=e.ref(null),T=e.ref(null);let $=e.ref(0);const ne=e.ref(230);e.onMounted(()=>{B()}),f({reset(){fe()},getSelectedRows(){return pe()},getColumnFilters(){return ke()},clearSelectedRows(){return Ce()},selectRow(l){K(l)},unselectRow(l){J(l)},isRowSelected(l){return q(l)}});const oe=(l,...t)=>l.replace(/{(\d+)}/g,(i,d)=>typeof t[d]<"u"?t[d]:i),C=e.computed(()=>{const l=n.columns.find(t=>t.isUnique);return(l==null?void 0:l.field)||null}),w=e.computed(()=>{const l=r.value<1?1:Math.ceil(y.value/r.value);return Math.max(l||0,1)}),H=e.computed(()=>(a.value-1)*r.value+1),O=e.computed(()=>{const l=a.value*r.value;return y.value>=l?l:y.value}),ae=e.computed(()=>{let l,t;return typeof n.showNumbersCount<"u"&&n.showNumbersCount<w.value?(l=Math.max(a.value-Math.floor(n.showNumbersCount/2),1),t=l+n.showNumbersCount-1,t>w.value&&(t=w.value,l=t-n.showNumbersCount+1)):(l=1,t=w.value),Array.from(Array(t+1-l).keys()).map(k=>l+k)}),B=()=>{var F,Y;let l=[],t=n.rows||[];if(n.isServerMode)y.value=n.totalRows||0,l=t;else{if((F=n.columns)==null||F.forEach(o=>{o.filter&&(o.value!==void 0&&o.value!==null&&o.value!==""||o.condition==="is_null"||o.condition=="is_not_null")&&(o.type==="string"?(o.value&&!o.condition&&(o.condition="contain"),o.condition==="contain"?t=t.filter(c=>{var v;return(v=u(c,o.field))==null?void 0:v.toString().toLowerCase().includes(o.value.toLowerCase())}):o.condition==="not_contain"?t=t.filter(c=>{var v;return!((v=u(c,o.field))!=null&&v.toString().toLowerCase().includes(o.value.toLowerCase()))}):o.condition==="equal"?t=t.filter(c=>{var v;return((v=u(c,o.field))==null?void 0:v.toString().toLowerCase())===o.value.toLowerCase()}):o.condition==="not_equal"?t=t.filter(c=>{var v;return((v=u(c,o.field))==null?void 0:v.toString().toLowerCase())!==o.value.toLowerCase()}):o.condition=="start_with"?t=t.filter(c=>{var v;return((v=u(c,o.field))==null?void 0:v.toString().toLowerCase().indexOf(o.value.toLowerCase()))===0}):o.condition=="end_with"&&(t=t.filter(c=>{var v;return((v=u(c,o.field))==null?void 0:v.toString().toLowerCase().substr(o.value.length*-1))===o.value.toLowerCase()}))):o.type==="number"?(o.value&&!o.condition&&(o.condition="equal"),o.condition==="equal"?t=t.filter(c=>u(c,o.field)&&parseFloat(u(c,o.field))===parseFloat(o.value)):o.condition==="not_equal"?t=t.filter(c=>u(c,o.field)&&parseFloat(u(c,o.field))!==parseFloat(o.value)):o.condition==="greater_than"?t=t.filter(c=>u(c,o.field)&&parseFloat(u(c,o.field))>parseFloat(o.value)):o.condition==="greater_than_equal"?t=t.filter(c=>u(c,o.field)&&parseFloat(u(c,o.field))>=parseFloat(o.value)):o.condition==="less_than"?t=t.filter(c=>u(c,o.field)&&parseFloat(u(c,o.field))<parseFloat(o.value)):o.condition==="less_than_equal"&&(t=t.filter(c=>u(c,o.field)&&parseFloat(u(c,o.field))<=parseFloat(o.value)))):o.type==="date"?(o.value&&!o.condition&&(o.condition="equal"),o.condition==="equal"?t=t.filter(c=>u(c,o.field)&&L(u(c,o.field))===o.value):o.condition==="not_equal"?t=t.filter(c=>u(c,o.field)&&L(u(c,o.field))!==o.value):o.condition==="greater_than"?t=t.filter(c=>u(c,o.field)&&L(u(c,o.field))>o.value):o.condition==="less_than"&&(t=t.filter(c=>u(c,o.field)&&L(u(c,o.field))<o.value))):o.type==="bool"&&(t=t.filter(c=>u(c,o.field)===o.value)),o.condition==="is_null"?(t=t.filter(c=>u(c,o.field)==null||u(c,o.field)==""),o.value=""):o.condition==="is_not_null"&&(o.value="",t=t.filter(c=>u(c,o.field))))}),S.value&&t.length){let o=[];const c=(n.columns||[]).filter(v=>v.search&&!v.hide).map(v=>v.field);for(var i=0;i<t.length;i++)for(var d=0;d<c.length;d++)if((Y=u(t[i],c[d]))!=null&&Y.toString().toLowerCase().includes(S.value.toLowerCase())){o.push(t[i]);break}t=o}var k=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});const be=E.value==="desc"?-1:1;t.sort((o,c)=>{var Q,X;const v=(Q=m.value)==null?void 0:Q.split(".").reduce((N,R)=>N==null?void 0:N[R],o),ge=(X=m.value)==null?void 0:X.split(".").reduce((N,R)=>N==null?void 0:N[R],c);return k.compare(v,ge)*be}),y.value=t.length||0,l=t.slice(H.value-1,O.value)}b.value=l||[]};e.watch(()=>n.loading,()=>{V.value=n.loading});const P=l=>{l?z.value===l.field?z.value=null:z.value=l.field:z.value=null},re=()=>{if(a.value==1)return!1;a.value--},se=l=>{a.value=l},ie=()=>{if(a.value>=w.value)return!1;a.value++},ce=()=>{_(!1),n.isServerMode?x("page"):(B(),s("pageChange",a.value))};e.watch(()=>a.value,ce);const ue=()=>{n.isServerMode||(a.value=1),_(!1),B()};e.watch(()=>n.rows,ue);const de=()=>{_(!1),n.isServerMode?a.value===1?x("pagesize",!0):a.value=1:(a.value=1,B(),s("pageSizeChange",r.value))};e.watch(()=>r.value,de);const U=l=>{let t="asc";l==m.value&&E.value==="asc"&&(t="desc");let i=(a.value-1)*r.value,d=r.value;m.value=l,E.value=t,_(!1),B(),n.isServerMode?x("sort"):s("sortChange",{offset:i,limit:d,field:l,direction:t})},I=l=>{A.value=l.length&&b.value.length&&l.length===b.value.length;const t=b.value.filter((i,d)=>g.value.includes(C.value?i[C.value]:d));s("rowSelect",t)};e.watch(()=>g.value,I);const _=l=>{l?g.value=b.value.map((t,i)=>C.value?t[C.value]:i):g.value=[]},G=()=>{_(!1),n.isServerMode?a.value===1?x("filter",!0):a.value=1:(a.value=1,B(),s("filterChange",n.columns))},he=()=>{_(!1),n.isServerMode?a.value===1?x("search",!0):a.value=1:(a.value=1,B(),s("searchChange",S.value))};e.watch(()=>n.search,he),e.watch(()=>n.search,()=>{S.value=n.search});const u=(l,t)=>t==null?void 0:t.split(".").reduce((i,d)=>i==null?void 0:i[d],l),L=l=>{try{if(!l)return"";const t=new Date(l),i=t.getDate(),d=t.getMonth()+1;return t.getFullYear()+"-"+(d>9?d:"0"+d)+"-"+(i>9?i:"0"+i)}catch{}return""},me=(l,t)=>{$.value++,$.value===1?T.value=setTimeout(()=>{$.value=0,n.selectRowOnClick&&(q(t)?J(t):K(t),I(g.value)),s("rowClick",l)},ne.value):$.value===2&&(clearTimeout(T.value),$.value=0,s("rowDBClick",l))},x=(l,t=!1)=>{if(n.isServerMode){ve();const i={current_page:t?1:a.value,pagesize:r.value,offset:(a.value-1)*r.value,sort_column:m.value,sort_direction:E.value,search:S.value,column_filters:n.columns,change_type:l};s("change",i)}},ve=()=>{for(let l=0;l<n.columns.length;l++){let t=n.columns[l];t.filter&&(t.value!==void 0&&t.value!==null&&t.value!==""||t.condition==="is_null"||t.condition==="is_not_null")&&(t.type==="string"&&t.value&&!t.condition&&(t.condition="contain"),t.type==="number"&&t.value&&!t.condition&&(t.condition="equal"),t.type==="date"&&t.value&&!t.condition&&(t.condition="equal"))}},fe=()=>{_(!1);for(let l=0;l<n.columns.length;l++)n.columns[l]=le[l];S.value="",r.value=M,m.value=ee,E.value=te,n.isServerMode?a.value===1?x("reset",!0):a.value=1:(a.value=1,B())},pe=()=>b.value.filter((t,i)=>g.value.includes(C.value?t[C.value]:i)),ke=()=>n.columns,Ce=()=>{g.value=[]},K=l=>{if(!q(l)){const t=b.value.find((i,d)=>d===l);g.value.push(C.value?t[C.value]:l)}},J=l=>{if(q(l)){const t=b.value.find((i,d)=>d===l);g.value=g.value.filter(i=>i!==(C.value?t[C.value]:l))}},q=l=>{const t=b.value.find((i,d)=>d===l);return t?g.value.includes(C.value?t[C.value]:l):!1};return(l,t)=>(e.openBlock(),e.createElementBlock("div",st,[e.createElementVNode("div",{class:e.normalizeClass(["bh-table-responsive",{"bh-min-h-[300px]":V.value}]),style:e.normalizeStyle({height:n.stickyHeader&&n.height})},[e.createElementVNode("table",{class:e.normalizeClass([n.skin])},[e.createElementVNode("thead",{class:e.normalizeClass({"bh-sticky bh-top-0 bh-z-10":n.stickyHeader})},[e.createVNode(Z,{all:n,currentSortColumn:m.value,currentSortDirection:E.value,isOpenFilter:z.value,checkAll:A.value,onSelectAll:_,onSortChange:U,onFilterChange:G,onToggleFilterMenu:P},null,8,["currentSortColumn","currentSortDirection","isOpenFilter","checkAll"])],2),e.createElementVNode("tbody",null,[y.value?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(b.value,(i,d)=>(e.openBlock(),e.createElementBlock("tr",{key:i[e.unref(C)]?i[e.unref(C)]:d,class:e.normalizeClass([typeof n.rowClass=="function"?p.rowClass(i):n.rowClass,n.selectRowOnClick?"bh-cursor-pointer":""]),onClick:e.withModifiers(k=>me(i,d),["prevent"])},[n.hasCheckbox?(e.openBlock(),e.createElementBlock("td",{key:0,class:e.normalizeClass({"bh-sticky bh-left-0 bh-bg-blue-light":n.stickyFirstColumn})},[e.createElementVNode("div",ct,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[0]||(t[0]=k=>g.value=k),type:"checkbox",value:i[e.unref(C)]?i[e.unref(C)]:d,onClick:t[1]||(t[1]=e.withModifiers(()=>{},["stop"]))},null,8,ut),[[e.vModelCheckbox,g.value]]),e.createElementVNode("div",null,[e.createVNode(j,{class:"check"})])])],2)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.columns,(k,F)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[k.hide?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("td",{key:k.field,class:e.normalizeClass([typeof n.cellClass=="function"?p.cellClass(i):n.cellClass,F===0&&n.stickyFirstColumn?"bh-sticky bh-left-0 bh-bg-blue-light":"",n.hasCheckbox&&F===0&&n.stickyFirstColumn?"bh-left-[52px]":"",k.cellClass?k.cellClass:""])},[e.unref(h)[k.field]?e.renderSlot(l.$slots,k.field,{key:0,value:i}):k.cellRenderer?(e.openBlock(),e.createElementBlock("div",{key:1,innerHTML:k.cellRenderer(i)},null,8,dt)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createTextVNode(e.toDisplayString(u(i,k.field)),1)],64))],2))],64))),256))],10,it))),128)):e.createCommentVNode("",!0),!y.value&&!V.value?(e.openBlock(),e.createElementBlock("tr",ht,[e.createElementVNode("td",{colspan:n.columns.length+1},e.toDisplayString(n.noDataContent),9,mt)])):e.createCommentVNode("",!0),!y.value&&V.value?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(n.pageSize,i=>(e.openBlock(),e.createElementBlock("tr",{key:i,class:"!bh-bg-white bh-h-11 !bh-border-transparent"},[e.createElementVNode("td",{colspan:n.columns.length+1,class:"!bh-p-0 !bh-border-transparent"},pt,8,vt)]))),128)):e.createCommentVNode("",!0)]),n.cloneHeaderInFooter?(e.openBlock(),e.createElementBlock("tfoot",{key:0,class:e.normalizeClass({"bh-sticky bh-bottom-0":n.stickyHeader})},[e.createVNode(Z,{all:n,currentSortColumn:m.value,currentSortDirection:E.value,isOpenFilter:z.value,isFooter:!0,checkAll:A.value,onSelectAll:_,onSortChange:U,onFilterChange:G,onToggleFilterMenu:P},null,8,["currentSortColumn","currentSortDirection","isOpenFilter","checkAll"])],2)):e.createCommentVNode("",!0)],2),y.value&&V.value?(e.openBlock(),e.createElementBlock("div",kt,[e.createVNode(rt)])):e.createCommentVNode("",!0)],6),n.pagination&&y.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["bh-pagination bh-py-5",{"bh-pointer-events-none":V.value}])},[e.createElementVNode("div",Ct,[e.createElementVNode("div",bt,[e.createElementVNode("span",gt,e.toDisplayString(oe(n.paginationInfo,y.value?e.unref(H):0,e.unref(O),y.value)),1),n.showPageSize?e.withDirectives((e.openBlock(),e.createElementBlock("select",{key:0,"onUpdate:modelValue":t[2]||(t[2]=i=>r.value=i),class:"bh-pagesize"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.pageSizeOptions,i=>(e.openBlock(),e.createElementBlock("option",{value:i,key:i},e.toDisplayString(i),9,yt))),128))],512)),[[e.vModelSelect,r.value]]):e.createCommentVNode("",!0)]),e.createElementVNode("div",_t,[n.showFirstPage?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:e.normalizeClass(["bh-page-item first-page",{disabled:a.value<=1}]),onClick:t[3]||(t[3]=i=>a.value=1)},[n.firstArrow?(e.openBlock(),e.createElementBlock("span",{key:0,innerHTML:n.firstArrow},null,8,wt)):(e.openBlock(),e.createElementBlock("svg",Bt,Nt))],2)):e.createCommentVNode("",!0),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["bh-page-item previous-page",{disabled:a.value<=1}]),onClick:re},[n.previousArrow?(e.openBlock(),e.createElementBlock("span",{key:0,innerHTML:n.previousArrow},null,8,Vt)):(e.openBlock(),e.createElementBlock("svg",St,xt))],2),n.showNumbers?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(e.unref(ae),i=>(e.openBlock(),e.createElementBlock("button",{key:i,type:"button",class:e.normalizeClass(["bh-page-item",{disabled:a.value===i,"bh-active":i===a.value}]),onClick:d=>se(i)},e.toDisplayString(i),11,$t))),128)):e.createCommentVNode("",!0),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["bh-page-item next-page",{disabled:a.value>=e.unref(w)}]),onClick:ie},[n.nextArrow?(e.openBlock(),e.createElementBlock("span",{key:0,innerHTML:n.nextArrow},null,8,Ft)):(e.openBlock(),e.createElementBlock("svg",Mt,qt))],2),n.showLastPage?(e.openBlock(),e.createElementBlock("button",{key:2,type:"button",class:e.normalizeClass(["bh-page-item last-page",{disabled:a.value>=e.unref(w)}]),onClick:t[4]||(t[4]=i=>a.value=e.unref(w))},[n.lastArrow?(e.openBlock(),e.createElementBlock("span",{key:0,innerHTML:n.lastArrow},null,8,Dt)):(e.openBlock(),e.createElementBlock("svg",At,Tt))],2)):e.createCommentVNode("",!0)])])],2)):e.createCommentVNode("",!0)]))}});module.exports=Ht;
